if (self.CavalryLogger) { CavalryLogger.start_js(["7reeB"]); }

__d("CometAudioManagerContexts",["React"],(function(a,b,c,d,e,f){"use strict";a=b("React");c=a.createContext({muted:!0,setMuted:function(){},setVolume:function(){},volume:1});f.CometAudioLocalScopeContext=c;d=a.createContext(null);f.AudioApiContext=d}),null);
__d("CometAudioLocalScopeProvider.react",["CometAudioManagerContexts","React"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(a){var c=a.customAudioSettingFunc,d=a.muted,e=a.setMuted,f=a.setVolume,h=a.volume,i=g.useMemo(function(){return{customAudioSettingFunc:c,muted:d,setMuted:e,setVolume:f,volume:h}},[c,d,e,f,h]);return g.jsx(b("CometAudioManagerContexts").CometAudioLocalScopeContext.Provider,{value:i,children:a.children})}}),null);
__d("CometAudioManagerUtils",["recoverableViolation"],(function(a,b,c,d,e,f){"use strict";a={persistMutedAndVolumeStateForLocalAudioScope:function(a,b){var c=a.audioLocalScope,d=a.controller,e=a.lastMuteReason,f=a.muted,g=a.paused,h=a.volume;c&&(e||(h!==c.volume&&d.setVolume(c.volume),f!==c.muted&&e!=="user_initiated"&&g&&d.setMuted(c.muted,"audio_manager_initiated")));b.forEach(function(b){var d=b.symbol;d!==a.symbol&&(b.audioLocalScope&&((!b.audioLocalScope.muted&&b.paused||b.audioLocalScope.muted)&&b.controller.setMuted(b.audioLocalScope.muted,"audio_manager_initiated"),b.controller.setVolume(c.volume)))})},persistMutedStateForLocalAudioScope:function(a,b){var c=a.audioLocalScope,d=a.controller,e=a.lastMuteReason,f=a.muted,g=a.paused;c&&(f!==c.muted&&e!=="user_initiated"&&g&&d.setMuted(c.muted,"audio_manager_initiated"));b.forEach(function(b){var c=b.symbol;c!==a.symbol&&(b.audioLocalScope&&((!b.audioLocalScope.muted&&b.paused||b.audioLocalScope.muted)&&b.controller.setMuted(b.audioLocalScope.muted,"audio_manager_initiated")))})},register:function(a,b){var c=a.symbol;b.set(c,a)},unmuteAudiosMutedByAudioManager:function(a){var b=a.controller,c=a.lastMuteReason,d=a.muted;a=a.paused;a&&d&&c==="audio_manager_initiated"&&b.setMuted(!1,"audio_manager_initiated")},unregister:function(a,b,c){if(c.has(a)){var d=c.get(a);d&&c["delete"](a)}b.has(a)&&b["delete"](a)},updateAudioContext:function(a,b){var c=a.audioLocalScope,d=a.lastMuteReason,e=a.muted,f=a.previousVolume;a=a.volume;c&&(d==="user_initiated"&&(e&&b.size===0&&!c.muted?c.setMuted(!0):!e&&c.muted&&c.setMuted(!1)),f!==null&&f!==a&&c.setVolume(a))},updateCurrentPlayingAudio:function(a,b,c){var d=a.lastMuteReason,e=a.lastPlayReason,f=a.muted,g=a.paused,h=a.symbol;!f&&!g&&!c.has(h)?c.size>0?d==="user_initiated"||e==="user_initiated"?(c.forEach(function(a){var d=b.get(a);if(d){d=d.controller;d.setMuted(!0,"audio_manager_initiated")}c["delete"](a)}),c.add(h)):a.controller.setMuted(!0,"audio_manager_initiated"):c.add(h):c.has(h)&&(f||g)&&c["delete"](h)},updateCurrentPlayingAudioIgnoreLastReason:function(a,b,c){var d=a.muted,e=a.paused;a=a.symbol;!d&&!e&&!c.has(a)?(c.size>0&&c.forEach(function(a){var d=b.get(a);if(d){d=d.controller;d.setMuted(!0,"audio_manager_initiated")}c["delete"](a)}),c.add(a)):c.has(a)&&(d||e)&&c["delete"](a)},updateRegisteredAudio:function(a,c){var d=a.symbol,e=c.get(d);e?c.set(d,a):b("recoverableViolation")("Received an update for an unregisterd video unit: "+d,"comet_video_player")}};f.CometAudioManagerUtils=a}),null);
__d("CometAudioManager.react",["CometAudioLocalScopeProvider.react","CometAudioManagerContexts","CometAudioManagerUtils","React","gkx","qex"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(a){var c=g.useRef(new Map()),d=g.useRef(new Set()),e=g.useCallback(function(a){b("CometAudioManagerUtils").CometAudioManagerUtils.register(a,c.current)},[]),f=g.useCallback(function(a){b("CometAudioManagerUtils").CometAudioManagerUtils.unregister(a,d.current,c.current)},[]),h=g.useCallback(function(a){b("CometAudioManagerUtils").CometAudioManagerUtils.updateRegisteredAudio(a,c.current);b("qex")._("1638916")&&(b("gkx")("1590815")?b("CometAudioManagerUtils").CometAudioManagerUtils.updateCurrentPlayingAudio(a,c.current,d.current):b("CometAudioManagerUtils").CometAudioManagerUtils.updateCurrentPlayingAudioIgnoreLastReason(a,c.current,d.current));b("CometAudioManagerUtils").CometAudioManagerUtils.updateAudioContext(a,d.current);var e=a.audioLocalScope.customAudioSettingFunc;e?e(a,c.current):b("qex")._("1638917")&&b("CometAudioManagerUtils").CometAudioManagerUtils.unmuteAudiosMutedByAudioManager(a)},[]),i=g.useMemo(function(){return{register:e,unregister:f,update:h}},[e,f,h]),j=g.useState(!0),k=j[0];j=j[1];var l=g.useState(1),m=l[0];l=l[1];return g.jsx(b("CometAudioLocalScopeProvider.react"),{muted:k,setMuted:j,setVolume:l,volume:m,children:g.jsx(b("CometAudioManagerContexts").AudioApiContext.Provider,{value:i,children:a.children})})}}),null);
__d("CometAudioManagerHooks",["CometAudioManagerContexts","React","recoverableViolation"],(function(a,b,c,d,e,f){"use strict";f.useAudioApi=a;var g=b("React");function a(){var a=g.useContext(b("CometAudioManagerContexts").AudioApiContext);if(a==null){b("recoverableViolation")("Empty AudioApiContext. Are you rendering useAudioApi outside of CometAudioManager?","comet_video_player");return null}else return a}}),null);
__d("makeAudioSymbol",[],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(a,b){b=b+"::"+a;return b}}),null);
__d("CoreVideoPlayerAudioClient.react",["CometAudioManagerContexts","CometAudioManagerHooks","React","VideoPlayerHooks","VideoPlayerPortalingPlaceInfoProvider.react","makeAudioSymbol","useCometUniqueID","usePrevious"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(){var a,c=b("useCometUniqueID")(),d=(a=b("VideoPlayerHooks")).useInstanceKey(),e=g.useMemo(function(){return b("makeAudioSymbol")(c,d)},[c,d]),f=b("CometAudioManagerHooks").useAudioApi(),h=a.useController(),i=a.useLastPlayReason(),j=a.useLastMuteReason(),k=a.useMuted(),l=a.useVolume(),m=b("usePrevious")(l);a=a.usePaused();var n=g.useContext(b("CometAudioManagerContexts").CometAudioLocalScopeContext),o=b("VideoPlayerPortalingPlaceInfoProvider.react").useVideoPlayerPortalingPlaceInfo(),p={audioLocalScope:n,controller:h,instanceKey:d,lastMuteReason:j,lastPlayReason:i,muted:k,paused:a,previousVolume:m,symbol:e,videoPlayerPortalingPlaceInfo:o,volume:l},q=g.useRef(p);g.useEffect(function(){f&&f.register(q.current);return function(){f&&f.unregister(e)}},[f,q,e]);g.useEffect(function(){f&&f.update(p)},[f,p]);return null}}),null);
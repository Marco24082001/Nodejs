if (self.CavalryLogger) { CavalryLogger.start_js(["Vk4My"]); }

__d("CometImageDownloadTracker",["Promise","NetworkStatus","setTimeout"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=2,h=250;function a(a,c){var d=0,e;return new(b("Promise"))(function(f,i){function j(){var e=new Image();e.onload=function(){b("NetworkStatus").reportSuccess(),f()};e.onerror=function(){var a=d<=g;a?b("setTimeout")(j,h):(b("NetworkStatus").reportError(),i())};d++;c();e.src=a}b("NetworkStatus").isOnline()?j():e=b("NetworkStatus").onChange(function(a){a=a.online;a&&(j(),e.remove())})})}}),null);
__d("CometResourceDownloadLogger",["performance"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g;function h(a){var b=a.indexOf("?");return b===-1?a:a.substring(0,b)}function i(a,b){b=b.substring(b.lastIndexOf(".")+1);if(b==="js"||b==="css")return b;else if(a==="img"||b==="gif"||b==="png"||b==="jpg"||b==="ico")return"img";else return a}function j(){return{css:{cacheCount:0,encodedBodySize:0,totalCount:0,transferSize:0},img:{cacheCount:0,encodedBodySize:0,totalCount:0,transferSize:0},js:{cacheCount:0,encodedBodySize:0,totalCount:0,transferSize:0}}}function a(a,c){if(typeof (g||(g=b("performance"))).getEntriesByType!=="function")return new Map();var d=j(),e=(g||(g=b("performance"))).getEntriesByType("resource").filter(function(b){return b.startTime>=a&&b.startTime<=c}).map(function(a){return{encodedBodySize:a.encodedBodySize,transferSize:a.transferSize,type:i(a.initiatorType,h(a.name))}}).filter(function(a){return d[a.type]});e.forEach(function(a){var b=d[a.type];b.encodedBodySize+=a.encodedBodySize;b.transferSize+=a.transferSize;b.totalCount++;a.transferSize===0&&b.cacheCount++});e=new Map();for(var f in d){var k=d[f];for(var l in k)e.set(f+"_"+l,k[l])}return e}}),null);
__d("getElementChildren",["isElementNode"],(function(a,b,c,d,e,f){function a(a){return Array.from(a.children||a.childNodes).filter(b("isElementNode"))}e.exports=a}),null);
__d("CometVisualCompletionTrace",["requireCond","CometResourceDownloadLogger","CometVisualCompletionConstants","CometVisualCompletionUtil","VisibilityListener","getElementChildren","cr:1401519","gkx","performance","performanceAbsoluteNow","performanceNavigationStart"],(function(a,b,c,d,e,f){"use strict";var g,h,i,j=b("performanceNavigationStart")(),k=/url\(.*(http.*)\)/gi;function l(){return{bottom:0,left:0,right:0,top:0}}function m(a){return{bottom:a.bottom,left:a.left,right:a.right,top:a.top}}function n(a,c){b("getElementChildren")(a).forEach(function(a){c.push(a)})}a=function(){function a(a,c,d,e){var f=this;this.$8=0;this.$9=0;this.$10=0;this.initialScrollY=0;this.scrolledVC=0;this.report=null;this.measureOriginalViewport=!0;this.reportedImages=new Map();this.scrollEventHandler=function(){f.$15=!0,f.markerPoints.has("scroll_start")||f.addMarkerPoint("scroll_start",(g||(g=b("performanceAbsoluteNow")))()),window.removeEventListener("scroll",f.scrollEventHandler)};this.$5=new Map();this.$3=new Map();this.$4=new Map();this.$1=[];this.$2=[];this.$7=0;this.$11=[];this.$12=new Set();this.$13=new Map();this.startTime=a;this.$6={height:0,width:0};this.initialScrollY=e==="INITIAL_LOAD"?0:window.scrollY;this.$14=this.initialScrollY;this.currentScrollY=this.initialScrollY;this.navSequence=c;this.traceID=d;this.markerPoints=new Map();this.annotations=new Map();this.tagSet=new Map();this.navDone=!1;this.interactionType=e;this.$15=!1;window.addEventListener("scroll",this.scrollEventHandler,{passive:!0})}var c=a.prototype;c.addAnnotation=function(a,b){this.annotations.set(a,b)};c.addFirstMarkerPoint=function(a,b,c){c===void 0&&(c={});var d=this.markerPoints.get(a);b>=this.startTime&&(!d||d.timestamp>b-this.startTime)&&this.markerPoints.set(a,{data:c,timestamp:b-this.startTime})};c.addMarkerPoint=function(a,b,c){c===void 0&&(c={}),b>=this.startTime&&this.markerPoints.set(a,{data:c,timestamp:b-this.startTime})};c.addRenderingInfo=function(a,b,c){this.$13.has(c)||this.$13.set(c,{data:{},element:a,timestamp:b})};c.addRenderingMetadata=function(a,b){var c=this.$13.get(a);c&&Object.keys(b).forEach(function(a){c.data[a]=b[a]})};c.addVisualElement=function(a,b,c){this.$15&&(this.currentScrollY=window.scrollY,this.$15=!1,window.addEventListener("scroll",this.scrollEventHandler,{passive:!0})),this.$11.push([a,c,b,this.currentScrollY])};c.trackPagelet=function(a,b,c,d,e,f){f===void 0&&(f=!1),this.$4.set(a,{data:{},element:a,excludeFromMainVC:f,name:b,pageletTypeName:e,points:{hydration:c-this.startTime},vcCallback:d})};c.addTag=function(a,b){this.tagSet.has(a)||this.tagSet.set(a,new Set());a=this.tagSet.get(a);a&&a.add(b)};c.calculate=function(a){var c=this;a===void 0&&(a=!0);window.removeEventListener("scroll",this.scrollEventHandler);this.$6=(h||(h=b("CometVisualCompletionUtil"))).getViewportSize();var d=(g||(g=b("performanceAbsoluteNow")))();this.$7=0;this.$9=0;this.$10=0;this.setResourceTimingMap();this.initTree();b("gkx")("1287276")||this.getImages();a&&b("gkx")("679542")&&this.getBackgroundImages();this.$8=this.calculatePaintedPixels(this.$1,this.$6.width*this.$6.height);var e={annotations:this.annotations,bgCheckLatency:this.$10,bgChecked:this.$7,bgNum:0,bgPixels:0,calcLatency:0,compNum:0,compPixels:0,elements:this.$2,finalScrollY:this.$14,imgNum:0,imgPixels:0,initialScrollY:this.initialScrollY,interactionType:this.interactionType,markerPoints:this.markerPoints,navComplete:g()-this.startTime,navSequence:this.navSequence,pagelets:Array.from(this.$4.values()),paintedPixels:this.$9,scrollY:window.scrollY,scrolledVC:this.scrolledVC,speedIndex:0,startTime:this.startTime,tagSet:this.tagSet,totalPixels:this.$8,traceId:this.traceID,tracePolicy:this.tracePolicy,vcWithoutImage:0,viewport:this.$6,visuallyComplete:0};this.$2.length&&(this.$2=this.$2.sort(function(a,b){return b.latency-a.latency}),this.addMarkerPoint("FP",this.$2[this.$2.length-1].timestamp),this.$2.forEach(function(a){var d=a.element;if(!d)return;var f=a.pagelet;if(f==null?void 0:f.excludeFromMainVC){var g="vcIncluding"+f.name;c.markerPoints.has(g)||e.markerPoints.set(g,{timestamp:Math.max(a.latency,e.visuallyComplete)})}else{if(e.visuallyComplete===0){g={height:a.rectangle.bottom-a.rectangle.top,mutationType:a.mutationType,tagName:d.tagName||"",type:a.type,width:a.rectangle.right-a.rectangle.left};f&&(g.pagelet=f.name);if(b("cr:1401519")){f=b("cr:1401519")(d);if(f!=null){d=f.indexOf("CometPageletImpl");d>=0&&f.splice(d);g.reactStack=f}}e.visuallyComplete=a.latency;e.markerPoints.set("visuallyComplete",{data:g,timestamp:a.latency});e.scrollY=a.scrollY}e.vcWithoutImage===0&&a.type==="component"&&(e.vcWithoutImage=a.latency,e.markerPoints.set("vcWithoutImage",{timestamp:a.latency}))}e.speedIndex+=a.pixels/c.$9*a.latency;switch(a.type){case"component":e.compNum++;e.compPixels+=a.pixels;break;case"img":e.imgNum++;e.imgPixels+=a.pixels;break;case"bg":e.bgNum++;e.bgPixels+=a.pixels;break}}));this.logPagelets();this.logPixelProgress();e.calcLatency=g()-d;this.setupMetaData(e);this.report=e;this.$3.clear();this.$1=[];this.$11=[];this.$4.clear();this.$5.clear();this.$12.clear();this.$13.clear();!b("gkx")("950768")&&!b("gkx")("1293035")&&!b("gkx")("1537962")&&this.$2.forEach(function(a){delete a.element});return e};c.findPagelet=function(a){a=a;while(a){if(this.$4.has(a))return this.$4.get(a);a=a.parentElement}return null};c.findParent=function(a){a=a.parentElement;while(a){if(this.$3.has(a))return this.$3.get(a);a=a.parentElement}return null};c.checkExcluded=function(a){a=a;while(a){if(this.$12.has(a))return!0;else if(this.$3.has(a))return!1;if(typeof a.getAttribute==="function"&&a.getAttribute(b("CometVisualCompletionConstants").ATTRIBUTE_NAME)===b("CometVisualCompletionConstants").IGNORE)return!0;a=a.parentElement}return!1};c.getBackgroundImages=function(){var c=this,d=(g||(g=b("performanceAbsoluteNow")))();this.$1.forEach(function(d){d=d.element;if(d&&typeof d.querySelectorAll==="function"){d=d.querySelectorAll("div,i,span,li");Array.prototype.forEach.call(d,function(d){var e;if(d.textContent||((e=b("getElementChildren")(d))==null?void 0:e.length)||c.checkExcluded(d))return;e=c.findParent(d);if(!e)return;var f=(h||(h=b("CometVisualCompletionUtil"))).offsetTop(d,c.initialScrollY),g=c.getRelativeBoundingClientRect(d,c.measureOriginalViewport?f:void 0);g=h.getRectIntersection(g,e.rectangle);var i=h.getPixels(g);if(i===0||c.measureOriginalViewport&&f>c.$6.height)return;var k=c.getStyleBackground(d);if(k==null)return;k=h.trimHash(k);if(c.$5.has(k)){var l=c.$5.get(k)+j,m=c.findPagelet(d);if(l>e.timestamp){d={children:[],element:d,lateMutation:!1,latency:l-c.startTime,mutationType:"bg",offsetTop:f,pagelet:m,parent:e,pixels:m&&m.excludeFromMainVC?0:i,rectangle:g,scrollY:e.scrollY,timestamp:l,type:"bg",url:k,veid:String(a.$16++)};e.children.push(d)}}})}});this.$10=g()-d};c.getRelativeBoundingClientRect=function(a,b){var c=l();if(typeof a.getBoundingClientRect!=="function")return c;c=m(a.getBoundingClientRect());return{bottom:b!=null?b+(c.bottom-c.top):c.bottom,left:c.left,right:c.right,top:b!=null?b:c.top}};c.findFirstVisibleChild=function(a){var c=this,d=[a];a=function(){var a=[],e=0,f=void 0;d.forEach(function(d){if(typeof d.getBoundingClientRect!=="function")return;var g=m(d.getBoundingClientRect()),i=(h||(h=b("CometVisualCompletionUtil"))).getPixels(g);if(i>0&&(g.bottom<=0||g.right<=0||g.left>=c.$6.width||g.top>=c.$6.height))return;i>e&&!c.checkExcluded(d)&&(e=i,f=d);n(d,a)});if(e>0&&f)return{v:f};d=a};while(d&&d.length){var e=a();if(typeof e==="object")return e.v}return null};c.getImages=function(){var c=this;this.$1.forEach(function(d){d=d.element;if(d&&typeof d.querySelectorAll==="function"){d=d.querySelectorAll("img, image");Array.prototype.forEach.call(d,function(d){if(c.$3.has(d)||c.checkExcluded(d))return;var e=d.currentSrc;d.tagName==="image"&&typeof d.getAttribute==="function"&&(e=d.getAttribute("xlink:href"));if(typeof e!=="string"||e==="")return;var f=c.findParent(d);if(!f)return;var g=c.findPagelet(d),i=(h||(h=b("CometVisualCompletionUtil"))).offsetTop(d,c.initialScrollY),k=c.getRelativeBoundingClientRect(d,c.measureOriginalViewport?i:void 0);k=h.getRectIntersection(k,f.rectangle);if(g){var l=g.element;if(l){l=c.getRelativeBoundingClientRect(l,c.measureOriginalViewport?(h||(h=b("CometVisualCompletionUtil"))).offsetTop(l,c.initialScrollY):void 0);(h||(h=b("CometVisualCompletionUtil"))).getPixels(l)>0&&(k=(h||(h=b("CometVisualCompletionUtil"))).getRectIntersection(k,l))}}l=h.getPixels(k);if(l===0||c.measureOriginalViewport&&i>c.$6.height)return;e=h.trimHash(e);if(c.$5.has(e)){var m=c.$5.get(e)+j;if(m>f.timestamp){d={children:[],element:d,lateMutation:!1,latency:m-c.startTime,mutationType:"img",offsetTop:i,pagelet:g,parent:f,pixels:g&&g.excludeFromMainVC?0:l,rectangle:k,scrollY:f.scrollY,timestamp:m,type:"img",url:e,veid:String(a.$16++)};f.children.push(d)}}})}})};c.getRectangle=function(a,c){a=this.findFirstVisibleChild(a);if(a==null)return l();a=this.getRelativeBoundingClientRect(a);var d=a.bottom,e=a.left,f=a.right;a=a.top;d={bottom:d,left:e,right:f,top:a};return(h||(h=b("CometVisualCompletionUtil"))).getRectIntersection(d,c)};c.getStyleBackground=function(a){if(typeof window.getComputedStyle!=="function")return null;this.$7++;a=window.getComputedStyle(a);var b=a["background-image"];if(a.visibility!=="hidden"&&b&&b!=="none"){k.lastIndex=0;a=k.exec(b);if(a&&a.length>1)return a[1].replace('"',"")}return null};c.excludeElement=function(a){this.$12.add(a)};c.initTree=function(){var c=this,d={bottom:this.$6.height,left:0,right:this.$6.width,top:-this.initialScrollY};this.$11.forEach(function(e){var f=e[0],g=e[1],i=e[2];e=e[3];f=c.findFirstVisibleChild(f);if(f==null)return;var j=(h||(h=b("CometVisualCompletionUtil"))).offsetTop(f,c.initialScrollY),k=c.getRelativeBoundingClientRect(f,c.measureOriginalViewport?j:void 0);k=h.getRectIntersection(k,d);if(c.inAboveTheFold(f)){g-c.startTime>c.scrolledVC&&(c.scrolledVC=g-c.startTime,c.$14=e);if(c.measureOriginalViewport&&j>c.$6.height)return;var l=c.findPagelet(f);j={children:[],element:f,lateMutation:!1,latency:g-c.startTime,mutationType:i,offsetTop:j,pagelet:l,parent:null,pixels:l&&l.excludeFromMainVC?0:(h||(h=b("CometVisualCompletionUtil"))).getPixels(k),rectangle:k,scrollY:e,timestamp:g,type:i==="imgLoad"||i==="mutationImageAttribute"?"img":"component",veid:String(a.$16++)};c.$3.set(f,j)}});this.$11=[];this.$3.forEach(function(a){var d=a.element;if(d){d=c.findParent(d);d?(a.rectangle=(h||(h=b("CometVisualCompletionUtil"))).getRectIntersection(a.rectangle,d.rectangle),a.pixels=Math.min(a.pixels,h.getPixels(a.rectangle)),a.type!=="component"&&(a.scrollY=d.scrollY),d.children.push(a),a.parent=d):c.$1.push(a)}})};c.logPixelProgress=function(){var a=this,b=new Map([["vc98",.02],["vc95",.05]]),c=0,d=0,e=function(e){var f=a.$2[e];c+=f.pixels;if(b.size===0)return"break";b.forEach(function(b,d){!a.markerPoints.has(d)&&c/a.$9>=b&&a.addMarkerPoint(d,f.latency+a.startTime)});f.type==="component"&&(d+=f.pixels,f.children.forEach(function(a){a.type!=="component"&&(d+=a.pixels)}),b.forEach(function(c,e){!a.markerPoints.has(e+"WithoutImage")&&d/a.$9>=c&&(a.addMarkerPoint(e+"WithoutImage",f.latency+a.startTime),b["delete"](e))}))};for(var f=0;f<this.$2.length;f++){var g=e(f);if(g==="break")break}};c.logPagelets=function(){var a=this;this.$4.forEach(function(b,c){if(!a.inViewport(c)){b.vcCallback!=null&&b.vcCallback(null,null,b.data);a.$4["delete"](c);return}c=a.$3.has(c)?a.$3.get(c):a.findParent(c);if(c){c=c.latency;b.points.firstPaint=c;b.points.visuallyComplete=c;b.points.vcWithoutImage=c}});this.$2.forEach(function(a){var b=a.pagelet;if(b!=null){var c,d=a.latency;b.points.visuallyComplete=Math.max((c=b.points.visuallyComplete)!=null?c:0,d);if(a.type==="component"){b.points.firstPaint!=null&&d>b.points.firstPaint&&(b.data.lateMutation=1,a.lateMutation=!0);b.points.vcWithoutImage=Math.max((c=b.points.vcWithoutImage)!=null?c:0,d)}}});this.$4.forEach(function(c){c.points.visuallyComplete!=null&&c.pageletTypeName!=null&&c.pageletTypeName!==""&&a.markerPoints.set(c.pageletTypeName+"VC",{timestamp:c.points.visuallyComplete}),c.points.vcWithoutImage!=null&&a.markerPoints.set("VC_"+c.name,{data:c.data,timestamp:c.points.vcWithoutImage}),c.vcCallback!=null&&c.points.visuallyComplete!=null&&c.points.vcWithoutImage!=null&&c.vcCallback(a.startTime+c.points.visuallyComplete-j,a.startTime+c.points.vcWithoutImage-j,c.data),!b("gkx")("950768")&&!b("gkx")("1293035")&&!b("gkx")("1537962")&&delete c.element});this.$13.forEach(function(b,c){var d=b.data;b=b.timestamp;a.addMarkerPoint("Mount_"+c,b,d)});this.$13.clear()};c.setResourceTimingMap=function(){var a=this;if(typeof (i||(i=b("performance"))).getEntriesByType==="function"){var c=(i||(i=b("performance"))).getEntriesByType("resource");c.forEach(function(c){var d=(h||(h=b("CometVisualCompletionUtil"))).trimHash(c.name);a.$5.set(d,c.responseEnd)})}};c.calculatePaintedPixels=function(a,b){var c=this,d=b,e=0;a.sort(function(a,b){return b.timestamp-a.timestamp}).forEach(function(a){a.pixels=Math.min(d,a.pixels),e+=a.pixels,d-=a.pixels,a.pixels-=c.calculatePaintedPixels(a.children,a.pixels),a.timestamp>c.startTime&&(c.$9+=a.pixels,c.$2.push(a),a.element&&c.$3.set(a.element,a))});return e};c.inAboveTheFold=function(a){a=a;var c=(h||(h=b("CometVisualCompletionUtil"))).getViewportSize();a=h.getPixels(this.getRectangle(a,{bottom:c.height,left:0,right:c.width,top:-window.scrollY}));return a>0};c.inOriginalViewport=function(a){return this.inAboveTheFold(a)&&(h||(h=b("CometVisualCompletionUtil"))).offsetTop(a,this.initialScrollY)<=this.$6.height};c.inViewport=function(a){return this.measureOriginalViewport?this.inOriginalViewport(a):this.inAboveTheFold(a)};c.setInitialScrollY=function(a){this.initialScrollY=a,this.currentScrollY=a};c.setTracePolicy=function(a){this.tracePolicy=a};c.setupMetaData=function(a){var c=b("VisibilityListener").getHiddenTimings(a.startTime,a.startTime+a.visuallyComplete);if(c!=null&&c.length>0){c=c.filter(function(b){return b.key>=a.startTime&&b.key<=a.startTime+a.visuallyComplete});for(var d=0;d<c.length;d++)if(c[d].value){a.markerPoints.set("backgrounded",{timestamp:c[d].key-this.startTime});break}}c=b("VisibilityListener").getHiddenTime(a.startTime,a.startTime+a.visuallyComplete);a.annotations.set("hidden",c!=null&&c>0?1:0);a.tracePolicy!=null&&a.tracePolicy!==""&&a.annotations.set("tracePolicy",a.tracePolicy);a.annotations.set("interactionId",a.traceId);a.annotations.set("height",a.viewport.height);a.annotations.set("width",a.viewport.width);a.annotations.set("scrollY",a.scrollY);a.annotations.set("finalScrollY",a.finalScrollY);a.annotations.set("initialScrollY",a.initialScrollY);a.annotations.set("overhead",a.calcLatency);a.annotations.set("navSequence",a.navSequence);a.markerPoints.set("logVC",{timestamp:a.navComplete});a.speedIndex>0&&a.markerPoints.set("speedIndex",{timestamp:a.speedIndex});a.navSequence===1&&(i||(i=b("performance")))&&(i||(i=b("performance"))).timing&&((i||(i=b("performance"))).timing.responseStart&&a.markerPoints.set("TTFB",{timestamp:(i||(i=b("performance"))).timing.responseStart-a.startTime}));a.elements.length&&(this.measureOriginalViewport&&a.scrolledVC>0&&a.markerPoints.set("scrolledVC",{timestamp:a.scrolledVC}));d=b("CometResourceDownloadLogger")(a.startTime-b("performanceNavigationStart")(),a.startTime+a.visuallyComplete-b("performanceNavigationStart")());d.forEach(function(b,c){a.annotations.set(c,b)})};return a}();a.$16=1;e.exports=a}),null);
__d("MutationObserver",[],(function(a,b,c,d,e,f){b=function(){"use strict";function a(a){}var b=a.prototype;b.observe=function(a,b){};b.disconnect=function(){};b.takeRecords=function(){return null};return a}();c=a.MutationObserver||a.WebKitMutationObserver||b;e.exports=c}),null);
__d("CometVisualCompletionTraceBase",["requireCond","CometImageDownloadTracker","cr:1604175","CometVisualCompletionConstants","CometVisualCompletionTrace","CometVisualCompletionTraceObserver","CometVisualCompletionUtil","IntersectionObserver","JSScheduler","MutationObserver","Visibility","gkx","intersectionObserverEntryIsIntersecting","performance","performanceAbsoluteNow","performanceNavigationStart"],(function(a,b,c,d,e,f){"use strict";var g,h,i,j=b("performanceNavigationStart")(),k=new Set(),l="IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype;function m(a){if(a==null||a==="")return!1;a=a.replace(/ /g,"");return a.indexOf("display:none")>=0||a.indexOf("visibility:hidden")>=0}b("Visibility").addListener(b("Visibility").HIDDEN,function(a){k.forEach(function(a){a.pendingMutations.forEach(function(b,c){a.addVisualElement(c,b.mutationType,b.displayTimestamp),a.intersectionObserver.unobserve(c),a.unlock(b.lockId)}),a.pendingMutations.clear()})});a=function(a){babelHelpers.inheritsLoose(c,a);function c(c,d,e,f){var g;g=a.call(this,c,d,e,f)||this;g.pendingLocks=new Set();g.pendingImages=new Set();g.$CometVisualCompletionTraceBase1=new Map();g.$CometVisualCompletionTraceBase2=[];g.pendingLoadingElements=new Set();g.$CometVisualCompletionTraceBase3=0;g.$CometVisualCompletionTraceBase4=[];g.mutationObserverConfig={attributeFilter:["hidden","style","href","src"],attributeOldValue:!0,attributes:!0,characterData:!0,childList:!0,subtree:!0};g.pendingMutations=new Map();g.intersectionObserverCallback=function(a){Array.prototype.forEach.call(a,function(a){var c=g.pendingMutations.get(a.target);c&&(c.mutationType==="imgLoad"||c.mutationType==="mutationImageAttribute"?(b("cr:1604175")&&c.imgSrc!=null&&g.reportedImages.set(c.imgSrc,{element:a.target,imgSrc:c.imgSrc,intersectionObserverEntry:a,loadTime:c.displayTimestamp,measurementType:"paint",mutationTime:c.mutationTimestamp,mutationType:c.mutationType,paintTime:a.time+j}),c.excludeFromVC||g.addVisualElement(a.target,c.mutationType,a.time+j)):c.excludeFromVC||g.addVisualElement(a.target,c.mutationType,a.time+j),g.intersectionObserver.unobserve(a.target),g.unlock(c.lockId),g.pendingMutations["delete"](a.target))})};g.mutationRecordHandler=function(a){var b=[];Array.from(a).forEach(function(a){if(a.target.nodeType!==Node.ELEMENT_NODE)return;var c=a.target;if(a.type==="childList"&&a.addedNodes&&a.addedNodes.length)Array.from(a.addedNodes).forEach(function(a){a=a;var c=g.shouldIgnoreMutation(a);if(a.tagName==="IMG"||a.tagName==="image"){g.trackImage(a,"imgLoad",c);return}else if(typeof a.querySelectorAll==="function"){var d=a.querySelectorAll("img, image");Array.from(d).forEach(function(a){g.trackImage(a,"imgLoad",c)})}c||b.push([a,"mutationAdd"])});else if(a.type==="attributes"&&!g.shouldIgnoreMutation(c))if(a.attributeName==="hidden")c.hasAttribute("hidden")||(g.checkLoadingStates(c),b.push([c,"mutationHiddenAttribute"]));else if(a.attributeName==="style"){var d=c.getAttribute("style"),e=a.oldValue;m(e)&&!m(d)&&(g.checkLoadingStates(c),b.push([c,"mutationStyleAttribute"]))}else(c.tagName==="image"&&a.attributeName==="href"||c.tagName==="IMG"&&a.attributeName==="src")&&g.trackImage(c,"mutationImageAttribute",!1)});g.trackElements(b)};g.loadingStateObserverCallback=function(a){Array.from(a).forEach(function(a){b("intersectionObserverEntryIsIntersecting")(a)?g.loadingElementAdded(a.target,a.time+j):g.loadingElementRemoved(a.target,a.time+j)})};g.mutationObserver=new(b("MutationObserver"))(g.mutationRecordHandler);g.loadingStateObserver=new(b("IntersectionObserver"))(g.loadingStateObserverCallback);g.intersectionObserver=new(b("IntersectionObserver"))(g.intersectionObserverCallback);k.add(babelHelpers.assertThisInitialized(g));return g}var d=c.prototype;d.addMutationRoot=function(a){this.trackElements([[a,"mutationRoot"]]);return this.observeMutation(a)};d.checkInvisibleStyleElement=function(a){a=a;while(a&&typeof a.getAttribute==="function"&&typeof a.hasAttribute==="function"){if(m(a.getAttribute("style"))||a.hasAttribute("hidden"))return!0;a=a.parentElement}return!1};d.checkResourceTimingDone=function(a){a=(g||(g=b("performance")))&&(g||(g=b("performance"))).getEntriesByName&&(g||(g=b("performance"))).getEntriesByName(a);return a&&a.length>0&&a[0].responseEnd};d.shouldIgnoreMutation=function(a){if(typeof a.getAttribute!=="function")return!1;return this.checkInvisibleStyleElement(a)?!0:a.getAttribute(b("CometVisualCompletionConstants").ATTRIBUTE_NAME)===b("CometVisualCompletionConstants").IGNORE};d.dumpLocks=function(){return[this.pendingLocks,this.pendingLoadingElements,this.pendingImages]};d.lock=function(a){var b=this;this.pendingLocks.add(a);return function(){b.unlock(a)}};d.imageDone=function(a){var c=this;if(!this.pendingImages.has(a))return;this.pendingImages["delete"](a);b("JSScheduler").scheduleLoggingPriCallback(function(){c.runInstrumentation()})};d.imageWait=function(a){this.pendingImages.add(a)};d.loadingElementRemoved=function(a,c){var d=this;this.pendingLoadingElements.has(a)&&(this.pendingLoadingElements["delete"](a),this.addMarkerPoint("loadingState_end",c),b("JSScheduler").scheduleLoggingPriCallback(function(){d.runInstrumentation()}))};d.loadingElementAdded=function(a,b){this.addFirstMarkerPoint("loadingState_start",b),this.pendingLoadingElements.add(a)};d.observeTailLoadLoadingState=function(a){var c=this;b("Visibility").isHidden()&&this.inAboveTheFold(a)&&this.addMarkerPoint("loadingState_start",(h||(h=b("performanceAbsoluteNow")))());var d=function(a){Array.prototype.forEach.call(a,function(a){b("intersectionObserverEntryIsIntersecting")(a)?c.addFirstMarkerPoint("loadingState_start",a.time+j):c.markerPoints.has("loadingState_start")&&c.addMarkerPoint("loadingState_end",a.time+j)})};d=new(b("IntersectionObserver"))(d);d.observe(a);this.$CometVisualCompletionTraceBase2.push(d)};d.waitLoadingState=function(a){var c=this,d=this.$CometVisualCompletionTraceBase1.get(a);if(d)return function(){d(),c.loadingElementRemoved(a,(h||(h=b("performanceAbsoluteNow")))())};if(typeof a.getAttribute==="function"&&a.getAttribute(b("CometVisualCompletionConstants").ATTRIBUTE_NAME)===b("CometVisualCompletionConstants").IGNORE)return function(){};this.loadingStateObserver.observe(a);(l&&!b("Visibility").isHidden()||(i||(i=b("CometVisualCompletionUtil"))).isInAboveTheFold(a))&&this.loadingElementAdded(a,(h||(h=b("performanceAbsoluteNow")))());var e=function(){c.loadingStateObserver.unobserve(a),c.$CometVisualCompletionTraceBase1["delete"](a)};this.$CometVisualCompletionTraceBase1.set(a,e);return function(){e(),c.loadingElementRemoved(a,(h||(h=b("performanceAbsoluteNow")))())}};d.trackImage=function(a,c,d){var e=this,f=a.currentSrc||a.src;if(a.tagName==="image"&&typeof a.getAttribute==="function"){var k=a.getAttribute("xlink:href");k!=null&&(f=k)}if(f==null||f===""||f.indexOf("http")!==0)return;var l;f.indexOf("#")>=0&&(l=(i||(i=b("CometVisualCompletionUtil"))).trimHash(f));if(!this.checkResourceTimingDone(f)&&(l==null||!this.checkResourceTimingDone(l))){var m=function(){e.imageDone(f)};k=function(){e.imageWait(f)};var n=(h||(h=b("performanceAbsoluteNow")))();b("CometImageDownloadTracker")(f,k).then(function(){b("gkx")("1287276")?e.scheduleIntersectionObserver(a,c,(h||(h=b("performanceAbsoluteNow")))(),n,f,d):b("cr:1604175")&&e.reportedImages.set(f,{element:a,imgSrc:f,loadTime:(h||(h=b("performanceAbsoluteNow")))(),measurementType:"load",mutationTime:n,mutationType:c}),m()})["catch"](function(){return m()})}else if(b("cr:1604175")&&(c==="imgLoad"||c==="mutationImageAttribute")&&(g||(g=b("performance")))&&(g||(g=b("performance"))).getEntriesByName&&!this.reportedImages.has(f)){k=(g||(g=b("performance"))).getEntriesByName(f);k==null&&l!=null&&(k=(g||(g=b("performance"))).getEntriesByName(l));k&&k.length>0&&k[0].startTime+j>=this.startTime&&this.reportedImages.set(f,{element:a,imgSrc:f,measurementType:"preload",mutationTime:(h||(h=b("performanceAbsoluteNow")))(),mutationType:c})}};d.unlock=function(a){var c=this;if(!this.pendingLocks.has(a))return;this.pendingLocks["delete"](a);b("JSScheduler").scheduleLoggingPriCallback(function(){c.runInstrumentation()})};d.checkLoadingStates=function(a){var c=this;if(typeof a.querySelectorAll==="function"){a=a.querySelectorAll("["+b("CometVisualCompletionConstants").ATTRIBUTE_NAME+"="+b("CometVisualCompletionConstants").LOADING_STATE+"]");Array.from(a).forEach(function(a){c.waitLoadingState(a)})}};d.observeMutation=function(a){this.checkLoadingStates(a);a.nodeType===Node.ELEMENT_NODE&&this.mutationObserver.observe(a,this.mutationObserverConfig);return function(){}};d.scheduleIntersectionObserver=function(a,c,d,e,f,g){var j=this;g===void 0&&(g=!1);if(b("Visibility").isHidden())this.addVisualElement(a,c,d),b("cr:1604175")&&f!=null&&(c==="imgLoad"||c==="mutationImageAttribute")&&this.reportedImages.set(f,{element:a,imgSrc:f,loadTime:d,measurementType:"hidden",mutationTime:e,mutationType:c});else if(l){var k=this.pendingMutations.get(a);k&&(this.intersectionObserver.unobserve(a),this.pendingMutations["delete"](a),this.pendingLocks["delete"](k.lockId));k="m_"+this.$CometVisualCompletionTraceBase3++;this.intersectionObserver.observe(a);this.lock(k);this.pendingMutations.set(a,{displayTimestamp:d,excludeFromVC:g,imgSrc:f,lockId:k,mutationTimestamp:e,mutationType:c})}else{var m="m_"+this.$CometVisualCompletionTraceBase3++;this.lock(m);(i||(i=b("CometVisualCompletionUtil"))).foregroundRequestAnimationFrame(function(){g||j.addVisualElement(a,c,(h||(h=b("performanceAbsoluteNow")))()),b("cr:1604175")&&f!=null&&(c==="imgLoad"||c==="mutationImageAttribute")&&j.reportedImages.set(f,{element:a,imgSrc:f,loadTime:d,measurementType:"rAF",mutationTime:e,mutationType:c,paintTime:(h||(h=b("performanceAbsoluteNow")))()}),j.unlock(m)})}};d.trackElements=function(a){var c=this,d=[];a.forEach(function(a){var b=a[0];b.nodeType===Node.ELEMENT_NODE&&b.tagName!=="IMG"&&b.tagName!=="image"&&d.push(a)});var e=(h||(h=b("performanceAbsoluteNow")))();if(b("gkx")("1287276")&&l)d.forEach(function(a){var b=a[0];a=a[1];c.scheduleIntersectionObserver(b,a,e,e)});else{var f="m_"+this.$CometVisualCompletionTraceBase3++;this.lock(f);(i||(i=b("CometVisualCompletionUtil"))).foregroundRequestAnimationFrame(function(){var a=(h||(h=b("performanceAbsoluteNow")))();d.forEach(function(b){var d=b[0];b=b[1];c.addVisualElement(d,b,a)});c.unlock(f)})}};d.onComplete=function(a){this.$CometVisualCompletionTraceBase4.push(a)};d.runInstrumentation=function(a){var c=this;a===void 0&&(a=!0);if(this.report!=null||this.pendingLocks.size>0||this.pendingLoadingElements.size>0)return!1;this.mutationObserver.disconnect();this.$CometVisualCompletionTraceBase1.forEach(function(a){a()});this.loadingStateObserver.disconnect();this.$CometVisualCompletionTraceBase1.clear();this.$CometVisualCompletionTraceBase2.forEach(function(a){a.disconnect()});k["delete"](this);this.intersectionObserver.disconnect();this.pendingMutations.clear();if(this.pendingImages.size>0)return!1;this.calculate(a);b("cr:1604175")&&(this.reportedImages.forEach(function(a){b("cr:1604175").logImagePerf(a,c)}),this.reportedImages.clear());this.report!=null&&b("CometVisualCompletionTraceObserver").emit(this.report);this.$CometVisualCompletionTraceBase4.forEach(function(a){a(c.report)});this.$CometVisualCompletionTraceBase4=[];return!0};d.forceInstrumentation=function(){this.pendingLocks.clear(),this.pendingLoadingElements.clear(),this.pendingImages.clear(),this.runInstrumentation(!1)};return c}(b("CometVisualCompletionTrace"));e.exports=a}),null);
__d("CometVisualCompletionTraceForInteraction",["CometVisualCompletionTraceBase","requireCond","cr:683059"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(c,a);function c(b,c,d,e){b=a.call(this,b,c,d,e)||this;b.measureOriginalViewport=!1;return b}var d=c.prototype;d.trackElements=function(c){var d=this;a.prototype.trackElements.call(this,c);c.forEach(function(a){a=a[0];d.interactionType==="INTERACTION"&&b("cr:683059")&&b("cr:683059").excludeElement(a)})};return c}(b("CometVisualCompletionTraceBase"));e.exports=a}),null);
__d("CometVisualCompletionTraceForNavigation",["CometVisualCompletionConstants","CometVisualCompletionTraceBase","CometVisualCompletionTraceObserver"],(function(a,b,c,d,e,f){"use strict";var g=new Set();a=function(a){babelHelpers.inheritsLoose(c,a);function c(c,d,e,f){var h;h=a.call(this,c,d,e,f)||this;g.forEach(function(a){h.checkLoadingStates(a),h.mutationObserver.observe(a,h.mutationObserverConfig)});b("CometVisualCompletionTraceObserver").emitNavigationStart();return h}var d=c.prototype;d.shouldIgnoreMutation=function(a){if(this.checkInvisibleStyleElement(a))return!0;var c=a.parentElement;while(c){if(typeof c.getAttribute==="function"&&c.getAttribute(b("CometVisualCompletionConstants").ATTRIBUTE_NAME)===b("CometVisualCompletionConstants").IGNORE_DYNAMIC){this.excludeElement(a);return!0}c=c.parentElement}return!1};d.observeMutation=function(b){a.prototype.observeMutation.call(this,b);g.add(b);return function(){g["delete"](b)}};return c}(b("CometVisualCompletionTraceBase"));e.exports=a}),null);
__d("VCTracker",["CometVisualCompletionTraceForInteraction","CometVisualCompletionTraceForNavigation"],(function(a,b,c,d,e,f){"use strict";a={CometVisualCompletionTraceForInteraction:b("CometVisualCompletionTraceForInteraction"),CometVisualCompletionTraceForNavigation:b("CometVisualCompletionTraceForNavigation")};e.exports=a}),null);